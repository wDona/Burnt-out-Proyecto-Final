CREATE TABLE Organizacion (
    ID_Org INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Org_Name TEXT NOT NULL
);

CREATE TABLE Usuario (
    ID_Usuario INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Username TEXT NOT NULL UNIQUE,
    Contrasena TEXT NOT NULL,
    Nombre TEXT NOT NULL,
    Riesgo_Burnout TEXT,
    Descripcion TEXT,
    FK_ID_Organizacion INTEGER NOT NULL,
    FOREIGN KEY(FK_ID_Organizacion) REFERENCES Organizacion(ID_Org)
);

CREATE TABLE Ajuste (
    ID_Ajuste INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Nombre_Ajuste TEXT NOT NULL
);

CREATE TABLE Tablero (
    ID_Tabl INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Titulo TEXT NOT NULL,
    FK_ID_Org INTEGER NOT NULL,
    FOREIGN KEY(FK_ID_Org) REFERENCES Organizacion(ID_Org)
);

CREATE TABLE Equipo (
    ID_Equipo INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Titulo TEXT NOT NULL,
    FK_ID_Org INTEGER NOT NULL,
    FOREIGN KEY(FK_ID_Org) REFERENCES Organizacion(ID_Org)
);

CREATE TABLE Pregunta (
    ID_Pregunta INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Pregunta TEXT NOT NULL,
    FK_ID_Org INTEGER NOT NULL,
    FOREIGN KEY(FK_ID_Org) REFERENCES Organizacion(ID_Org)
);

CREATE TABLE Tarea (
    ID_Tarea INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Titulo TEXT NOT NULL,
    Descripcion TEXT,
    Estado TEXT NOT NULL,
    FK_ID_Tabl INTEGER NOT NULL,
    FK_ID_Usuario INTEGER NOT NULL,
    FOREIGN KEY(FK_ID_Tabl) REFERENCES Tablero(ID_Tabl),
    FOREIGN KEY(FK_ID_Usuario) REFERENCES Usuario(ID_Usuario)
);

CREATE TABLE Subtarea (
    ID_Subtarea INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    Titulo TEXT NOT NULL,
    Completado INTEGER AS Boolean NOT NULL,
    FK_ID_Tarea INTEGER NOT NULL,
    FOREIGN KEY(FK_ID_Tarea) REFERENCES Tarea(ID_Tarea)
);

CREATE TABLE User_Team (
    ID_Usuario INTEGER NOT NULL,
    ID_Equipo INTEGER NOT NULL,
    PRIMARY KEY (ID_Usuario, ID_Equipo),
    FOREIGN KEY(ID_Usuario) REFERENCES Usuario(ID_Usuario),
    FOREIGN KEY(ID_Equipo) REFERENCES Equipo(ID_Equipo)
);

CREATE TABLE Ajuste_User (
    ID_Usuario INTEGER NOT NULL,
    ID_Ajuste INTEGER NOT NULL,
    Valor_Ajuste TEXT,
    PRIMARY KEY (ID_Usuario, ID_Ajuste),
    FOREIGN KEY(ID_Usuario) REFERENCES Usuario(ID_Usuario),
    FOREIGN KEY(ID_Ajuste) REFERENCES Ajuste(ID_Ajuste)
);

CREATE TABLE Responder (
    ID_Usuario INTEGER NOT NULL,
    ID_Pregunta INTEGER NOT NULL,
    Anonimo INTEGER AS Boolean NOT NULL,
    Respuesta TEXT NOT NULL,
    PRIMARY KEY (ID_Usuario, ID_Pregunta),
    FOREIGN KEY(ID_Usuario) REFERENCES Usuario(ID_Usuario),
    FOREIGN KEY(ID_Pregunta) REFERENCES Pregunta(ID_Pregunta)
);

